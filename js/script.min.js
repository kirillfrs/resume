"use strict";!function(){var e=document.querySelector(".slider"),t=document.querySelector(".about-me__story--first"),n=document.querySelector(".about-me__story--second");e.addEventListener("change",(function(e){e.preventDefault(),n.classList.contains("hidden")?(n.classList.remove("hidden"),t.classList.add("hidden")):(t.classList.remove("hidden"),n.classList.add("hidden"))}))}(),document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector("#form");function t(e){e.parentElement.classList.add("_error"),e.classList.add("_error")}function n(e){e.parentElement.classList.remove("_error"),e.classList.remove("_error")}function o(e){return!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(e.value)}e.addEventListener("submit",(async function(c){c.preventDefault();let a=function(e){let s=0,r=document.querySelectorAll("._req");for(let e=0;e<r.length;e++){const c=r[e];n(c),c.classList.contains("_email")?o(c)&&(t(c),s++):("checkbox"===c.getAttribute("type")&&!1===c.checked||""===c.value)&&(t(c),s++)}return s}(),i=new FormData(e);if(i.append("image",s.files[0]),0===a){e.classList.add("_sending");let t=await fetch("sendmail.php",{method:"POST",body:i});if(t.ok){let n=await t.json();alert(n.message),r.innerHTML="",e.reset(),e.classList.remove("_sending")}else alert("Ошибка"),e.classList.remove("_sending")}else alert("Заполните обязательные поля")}));const s=document.querySelector("#formImage"),r=document.querySelector("#formPreview");s.addEventListener("change",(function(){c(s.files[0])}));let c=function(e){if(!["image/jpeg","image/png","image/gif"].includes(e.type))return alert("Разрешены только изображения."),void(s.value="");if(e.size>2097152)alert("файл не должен превышать 2 МБ");else{var t=new FileReader;t.onload=function(e){r.innerHTML=`<img src ="${e.target.result}" alt=Photo> `},t.onerror=function(e){alert("Ошибка")},t.readAsDataURL(e)}}})),function(){var e=document.querySelectorAll(".site-list__link--contacts"),t=document.querySelector(".modal-contacts"),n=document.querySelector(".form__close-btn"),o=document.querySelector(".modal-contacts"),s=function(e){e.preventDefault(),t.classList.add("modal-show")};e.forEach((function(e){e.addEventListener("click",s)})),window.addEventListener("keydown",(function(e){27===e.keyCode&&(e.preventDefault(),o.classList.contains("modal-show")&&(o.classList.remove("modal-show"),o.classList.remove("modal-error")))})),n.addEventListener("click",(function(e){e.preventDefault(),o.classList.remove("modal-show"),o.classList.remove("modal-error")}))}(),function(){var e=document.querySelector(".menu"),t=document.querySelector(".menu-top"),n=document.querySelector(".menu-middle"),o=document.querySelector(".menu-bottom"),s=document.querySelector(".main-nav__list");e.addEventListener("click",(function(e){e.preventDefault(),t.classList.toggle("menu-top-click"),n.classList.toggle("menu-middle-click"),o.classList.toggle("menu-bottom-click"),s.classList.toggle("main-nav__list--opened")}))}();